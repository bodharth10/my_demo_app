
<div class="row">
  <div class="col-md-5">
    <div class="count-text">Total Photo Count</div>
  </div>
  <div class="col-md-5 col-md-offset-2"></div>
  <div id="photo_counter"><span class="count"></span></div>
  
</div>

<h1>Photo Gallery</h1>

<div class="ajax-progress"></div>

<h2><%= link_to "Add photo", new_photo_path, class: "btn btn-default"%></h2>

<h3>Import Photos</h3>
  <%= form_tag  import_photos_path, multipart: true do %>
  <%= file_field_tag :file %></br>
  <%= submit_tag "Import Photos" %>
<% end %></br>

<div id="photo_index">
  <%= render 'index', photos: @photos %>
</div>

<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

  </div> 
</div>
<%= paginate @photos %>

<script>
  $(document).ready(function() {
    $(".count-text").css("color", "orange");
      $.ajax({
            type: "GET",// GET in place of POST
            url: "/photos/counter",
            success: function (result) {
               //do somthing here
               $(".count").html(result);
               $(".count-text").css("color", "green");
            },
            error: function (response){
              window.alert("something wrong!");
            }
       });
                                                                                                                                                                                                                                                                                                                                                                         
   });
</script>

<!-- <script>
   $('.count').each(function () {
    $(this).prop('Counter',0).animate({
        Counter: $(this).text()
    }, {
        duration: 4000,
        easing: 'swing',
        step: function (now) {
            $(this).text(Math.ceil(now));
            console.log($(this).html());
            if ($(this).html() < <%#= Photo.count %>) {
             $(".count-text").css("color", "orange");
            } else {
             $(".count-text").css("color", "green");
            } 
        }
    });
});
</script>
 -->


